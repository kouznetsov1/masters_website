{"ast":null,"code":"import axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport React, { useState } from \"react\";\nimport { addCourse, addArea } from \"../../store/courses\";\nimport { SettingsSystemDaydreamRounded } from \"@material-ui/icons\";\nexport const getCourses = () => {\n  axios.get(\"http://localhost:5000/courses\").then(res => {\n    const courses_mount = res.data;\n    const all_areas = [];\n    const courses = {\n      name: [],\n      course: []\n    };\n    const dispatch = useDispatch();\n\n    const handleCourseAdd = event => {\n      event.preventDefault();\n      dispatch(addCourse(course));\n      setCourse('');\n    };\n\n    const handleAreaAdd = event => {\n      event.preventDefault();\n      dispatch(addArea(area));\n      setArea('');\n    };\n\n    for (let i = 0; i < courses_mount.length; i++) {\n      var course = courses_mount[i];\n\n      if (!all_areas.includes(course.area)) {\n        //all_areas.push(course.area);\n        handleCourseAdd(course.area);\n      }\n\n      if (!courses.name.includes(course.name)) {\n        course = fixCourseDatatypes(course);\n        courses.name.push(course.name);\n        courses.course.push(course);\n        course.strike_through = false;\n      } else {\n        var index = courses.name.indexOf(course.name);\n\n        if (!courses.course[index].area.includes(course.area)) {\n          courses.course[index].area.push(course.area);\n        }\n\n        var dynamic_values = courses.course[index].dynamic_values;\n        var dyn_values = setDynamicValues(course);\n        courses.course[index].dynamic_values.push(dyn_values);\n        var dyn_val_unique = courses.course[index].dynamic_values.reduce((unique, o) => {\n          if (!unique.some(obj => obj.semester === o.semester && obj.block === o.block && obj.period === o.period)) {\n            unique.push(o);\n          }\n\n          return unique;\n        }, []);\n        courses.course[index].dynamic_values = dyn_val_unique;\n      }\n    }\n\n    console.log(courses);\n    return [courses, all_areas];\n  }); //return \"hej\";\n};\n\nfunction setDynamicValues(course) {\n  var dynamic_values = {\n    semester: course.semester,\n    block: course.block,\n    period: course.period,\n    checked_here: false\n  };\n  return dynamic_values;\n} // variable needs to be of type array for the ones below\n\n\nfunction fixCourseDatatypes(course) {\n  course.dynamic_values = [setDynamicValues(course)];\n  course.area = [course.area];\n  return course;\n}\n\nexport default getCourses;","map":{"version":3,"sources":["/home/daniel/Documents/Projects/masters_website/client/src/components/functions/CourseGetter.js"],"names":["axios","useDispatch","React","useState","addCourse","addArea","SettingsSystemDaydreamRounded","getCourses","get","then","res","courses_mount","data","all_areas","courses","name","course","dispatch","handleCourseAdd","event","preventDefault","setCourse","handleAreaAdd","area","setArea","i","length","includes","fixCourseDatatypes","push","strike_through","index","indexOf","dynamic_values","dyn_values","setDynamicValues","dyn_val_unique","reduce","unique","o","some","obj","semester","block","period","console","log","checked_here"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,SAAT,EAAoBC,OAApB,QAAmC,qBAAnC;AACA,SAASC,6BAAT,QAA8C,oBAA9C;AAEA,OAAO,MAAMC,UAAU,GAAG,MAAM;AAC9BP,EAAAA,KAAK,CAACQ,GAAN,CAAU,+BAAV,EAA2CC,IAA3C,CAAiDC,GAAD,IAAS;AACvD,UAAMC,aAAa,GAAGD,GAAG,CAACE,IAA1B;AACA,UAAMC,SAAS,GAAG,EAAlB;AACA,UAAMC,OAAO,GAAG;AACdC,MAAAA,IAAI,EAAE,EADQ;AAEdC,MAAAA,MAAM,EAAE;AAFM,KAAhB;AAIA,UAAMC,QAAQ,GAAGhB,WAAW,EAA5B;;AAEA,UAAMiB,eAAe,GAAGC,KAAK,IAAI;AAC/BA,MAAAA,KAAK,CAACC,cAAN;AACAH,MAAAA,QAAQ,CAACb,SAAS,CAACY,MAAD,CAAV,CAAR;AACAK,MAAAA,SAAS,CAAC,EAAD,CAAT;AACD,KAJD;;AAMA,UAAMC,aAAa,GAAGH,KAAK,IAAI;AAC7BA,MAAAA,KAAK,CAACC,cAAN;AACAH,MAAAA,QAAQ,CAACZ,OAAO,CAACkB,IAAD,CAAR,CAAR;AACAC,MAAAA,OAAO,CAAC,EAAD,CAAP;AACD,KAJD;;AAMA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,aAAa,CAACe,MAAlC,EAA0CD,CAAC,EAA3C,EAA+C;AAC7C,UAAIT,MAAM,GAAGL,aAAa,CAACc,CAAD,CAA1B;;AAEA,UAAI,CAACZ,SAAS,CAACc,QAAV,CAAmBX,MAAM,CAACO,IAA1B,CAAL,EAAsC;AACpC;AACAL,QAAAA,eAAe,CAACF,MAAM,CAACO,IAAR,CAAf;AACD;;AAED,UAAI,CAACT,OAAO,CAACC,IAAR,CAAaY,QAAb,CAAsBX,MAAM,CAACD,IAA7B,CAAL,EAAyC;AACvCC,QAAAA,MAAM,GAAGY,kBAAkB,CAACZ,MAAD,CAA3B;AACAF,QAAAA,OAAO,CAACC,IAAR,CAAac,IAAb,CAAkBb,MAAM,CAACD,IAAzB;AACAD,QAAAA,OAAO,CAACE,MAAR,CAAea,IAAf,CAAoBb,MAApB;AACAA,QAAAA,MAAM,CAACc,cAAP,GAAwB,KAAxB;AACD,OALD,MAKO;AACL,YAAIC,KAAK,GAAGjB,OAAO,CAACC,IAAR,CAAaiB,OAAb,CAAqBhB,MAAM,CAACD,IAA5B,CAAZ;;AAEA,YAAI,CAACD,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBR,IAAtB,CAA2BI,QAA3B,CAAoCX,MAAM,CAACO,IAA3C,CAAL,EAAuD;AACrDT,UAAAA,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBR,IAAtB,CAA2BM,IAA3B,CAAgCb,MAAM,CAACO,IAAvC;AACD;;AAED,YAAIU,cAAc,GAAGnB,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBE,cAA3C;AACA,YAAIC,UAAU,GAAGC,gBAAgB,CAACnB,MAAD,CAAjC;AAEAF,QAAAA,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBE,cAAtB,CAAqCJ,IAArC,CAA0CK,UAA1C;AAEA,YAAIE,cAAc,GAAGtB,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBE,cAAtB,CAAqCI,MAArC,CACnB,CAACC,MAAD,EAASC,CAAT,KAAe;AACb,cACE,CAACD,MAAM,CAACE,IAAP,CACEC,GAAD,IACEA,GAAG,CAACC,QAAJ,KAAiBH,CAAC,CAACG,QAAnB,IACAD,GAAG,CAACE,KAAJ,KAAcJ,CAAC,CAACI,KADhB,IAEAF,GAAG,CAACG,MAAJ,KAAeL,CAAC,CAACK,MAJpB,CADH,EAOE;AACAN,YAAAA,MAAM,CAACT,IAAP,CAAYU,CAAZ;AACD;;AACD,iBAAOD,MAAP;AACD,SAbkB,EAcnB,EAdmB,CAArB;AAgBAxB,QAAAA,OAAO,CAACE,MAAR,CAAee,KAAf,EAAsBE,cAAtB,GAAuCG,cAAvC;AACD;AACF;;AACDS,IAAAA,OAAO,CAACC,GAAR,CAAYhC,OAAZ;AACA,WAAO,CAACA,OAAD,EAAUD,SAAV,CAAP;AACD,GAnED,EAD8B,CAqE9B;AACD,CAtEM;;AA0EP,SAASsB,gBAAT,CAA0BnB,MAA1B,EAAkC;AAChC,MAAIiB,cAAc,GAAG;AACnBS,IAAAA,QAAQ,EAAE1B,MAAM,CAAC0B,QADE;AAEnBC,IAAAA,KAAK,EAAE3B,MAAM,CAAC2B,KAFK;AAGnBC,IAAAA,MAAM,EAAE5B,MAAM,CAAC4B,MAHI;AAInBG,IAAAA,YAAY,EAAE;AAJK,GAArB;AAMA,SAAOd,cAAP;AACD,C,CAED;;;AACA,SAASL,kBAAT,CAA4BZ,MAA5B,EAAoC;AAClCA,EAAAA,MAAM,CAACiB,cAAP,GAAwB,CAACE,gBAAgB,CAACnB,MAAD,CAAjB,CAAxB;AACAA,EAAAA,MAAM,CAACO,IAAP,GAAc,CAACP,MAAM,CAACO,IAAR,CAAd;AACA,SAAOP,MAAP;AACD;;AAED,eAAeT,UAAf","sourcesContent":["import axios from \"axios\"\nimport { useDispatch } from \"react-redux\";\nimport React, {useState} from \"react\";\nimport { addCourse, addArea } from \"../../store/courses\";\nimport { SettingsSystemDaydreamRounded } from \"@material-ui/icons\";\n\nexport const getCourses = () => {\n  axios.get(\"http://localhost:5000/courses\").then((res) => {\n    const courses_mount = res.data;\n    const all_areas = [];\n    const courses = {\n      name: [],\n      course: [],\n    };\n    const dispatch = useDispatch();\n\n    const handleCourseAdd = event => {\n      event.preventDefault();\n      dispatch(addCourse(course))\n      setCourse('');\n    };\n    \n    const handleAreaAdd = event => {\n      event.preventDefault();\n      dispatch(addArea(area))\n      setArea('');\n    };\n\n    for (let i = 0; i < courses_mount.length; i++) {\n      var course = courses_mount[i];\n\n      if (!all_areas.includes(course.area)) {\n        //all_areas.push(course.area);\n        handleCourseAdd(course.area);\n      }\n\n      if (!courses.name.includes(course.name)) {\n        course = fixCourseDatatypes(course);\n        courses.name.push(course.name);\n        courses.course.push(course);\n        course.strike_through = false;\n      } else {\n        var index = courses.name.indexOf(course.name);\n\n        if (!courses.course[index].area.includes(course.area)) {\n          courses.course[index].area.push(course.area);\n        }\n\n        var dynamic_values = courses.course[index].dynamic_values;\n        var dyn_values = setDynamicValues(course);\n\n        courses.course[index].dynamic_values.push(dyn_values);\n\n        var dyn_val_unique = courses.course[index].dynamic_values.reduce(\n          (unique, o) => {\n            if (\n              !unique.some(\n                (obj) =>\n                  obj.semester === o.semester &&\n                  obj.block === o.block &&\n                  obj.period === o.period\n              )\n            ) {\n              unique.push(o);\n            }\n            return unique;\n          },\n          []\n        );\n        courses.course[index].dynamic_values = dyn_val_unique;\n      }\n    }\n    console.log(courses);\n    return [courses, all_areas];\n  });\n  //return \"hej\";\n};\n\n\n\nfunction setDynamicValues(course) {\n  var dynamic_values = {\n    semester: course.semester,\n    block: course.block,\n    period: course.period,\n    checked_here: false,\n  };\n  return dynamic_values;\n}\n\n// variable needs to be of type array for the ones below\nfunction fixCourseDatatypes(course) {\n  course.dynamic_values = [setDynamicValues(course)];\n  course.area = [course.area];\n  return course;\n}\n\nexport default getCourses;"]},"metadata":{},"sourceType":"module"}